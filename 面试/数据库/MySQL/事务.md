事务（Transaction）具有以下四个主要特性，通常被称为 ACID 特性：

1.  **原子性（Atomicity）**
    *   **定义**：一个事务是一个不可分割的最小工作单元，其中的所有操作要么全部成功提交，要么全部失败回滚。不可能只执行其中一部分操作。
    *   **MySQL如何保证**：
        *   **Undo Log（回滚日志）**：MySQL 的 InnoDB 存储引擎使用 Undo Log 来实现原子性。当事务对数据进行修改时，旧的数据版本会被写入 Undo Log。如果事务回滚，MySQL 会利用 Undo Log 中的信息将数据恢复到事务开始前的状态。
        *   **事务日志（Redo Log）**：虽然Redo Log主要用于持久性，但它也间接辅助了原子性。在崩溃恢复时，如果部分事务已经写入Redo Log但未提交，可以通过Redo Log将其重做，如果需要回滚，Undo Log会确保数据的一致性。

2.  **一致性（Consistency）**
    *   **定义**：事务执行前后，数据库从一个一致性状态转换到另一个一致性状态。这意味着数据库的完整性约束（如主键约束、外键约束、唯一约束、检查约束以及用户自定义的业务规则）不会被破坏。
    *   **MySQL如何保证**：
        *   **原子性、隔离性、持久性的基础**：一致性是其他三个特性的最终目标。如果原子性、隔离性和持久性都得到了保证，那么一致性自然也得到了保证。
        *   **数据库约束**：MySQL 会强制执行各种数据库约束（如 PRIMARY KEY, UNIQUE, FOREIGN KEY, NOT NULL 等）。在事务提交前，会检查这些约束是否被违反。
        *   **回滚**：当事务中的操作违反了数据库的一致性规则时，事务会自动回滚，确保数据回到一致状态。
        *   **隔离级别**：通过不同的隔离级别（特别是可重复读和序列化）来防止并发事务所导致的数据不一致。

3.  **隔离性（Isolation）**
    *   **定义**：并发执行的事务之间互不干扰，每个事务都感觉自己是系统中唯一运行的事务。事务的中间状态对其他事务是不可见的。
    *   **MySQL如何保证**：
        *   **锁机制（Locking）**：InnoDB 存储引擎使用各种锁（如行级锁、表级锁、意向锁）来控制并发事务对数据的访问。当一个事务修改数据时，会持有相应的锁，阻止其他事务同时修改或读取同一数据，直到该事务提交或回滚。
        *   **多版本并发控制（MVCC - Multi-Version Concurrency Control）**：InnoDB 主要通过 MVCC 来实现读写分离，提高并发性能。对于读操作，MVCC 允许事务读取数据的历史版本（通过 Undo Log 实现），而无需加锁，从而避免了读写冲突。对于写操作，仍然使用锁。
        *   **隔离级别**：MySQL 定义了四种隔离级别（读未提交、读已提交、可重复读、串行化），通过不同的锁策略和 MVCC 机制来提供不同程度的隔离。默认隔离级别是 `REPEATABLE READ`。

4.  **持久性（Durability）**
    *   **定义**：一旦事务提交，它对数据库的修改就是永久性的，即使系统发生故障（如断电、崩溃），这些修改也不会丢失。
    *   **MySQL如何保证**：
        *   **Redo Log（重做日志）**：InnoDB 存储引擎使用 Redo Log 来保证持久性。事务提交时，其修改的数据会先写入 Redo Log 缓冲区，并刷新到磁盘上的 Redo Log 文件。即使数据页尚未写入磁盘，系统崩溃后，MySQL 也可以通过 Redo Log 来重做（Redo）已提交事务所做的修改，从而恢复数据。
        *   **双写缓冲区（Doublewrite Buffer）**：为了防止部分写失败（partial page write），InnoDB 在将数据页写入数据文件之前，会先将数据页写入双写缓冲区。如果原始数据文件写入失败，可以从双写缓冲区恢复。
        *   **`sync_binlog` 和 `innodb_flush_log_at_trx_commit` 参数**：
            *   `innodb_flush_log_at_trx_commit`：控制事务提交时 Redo Log 刷新到磁盘的频率。设置为 1（最严格，默认值）表示每次提交都刷新，确保最高持久性；设置为 0 或 2 则可能在崩溃时丢失少量已提交事务。
            *   `sync_binlog`：控制二进制日志（Binary Log，主要用于主从复制和数据恢复）刷新到磁盘的频率。设置为 1 表示每次写操作都刷新，确保 Binlog 的持久性。

这些特性共同确保了数据库事务的可靠性和数据完整性。