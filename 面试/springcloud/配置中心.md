Spring Cloud 中常见的配置中心包括：

1.  **Spring Cloud Config**
2.  **Nacos**
3.  **Apollo**

它们的运行原理如下：

### 1. Spring Cloud Config

**运行原理：**

*   **配置服务器 (Config Server)：**
    *   充当一个微服务的形式，负责从 Git、SVN、本地文件系统等后端存储中读取配置信息。
    *   它提供 REST API 接口，供客户端微服务获取配置。
    *   通常将配置信息存储在版本控制系统（如 Git）中，这样可以对配置进行版本管理、审计和回滚。
*   **配置客户端 (Config Client)：**
    *   集成 `spring-cloud-starter-config` 依赖的微服务。
    *   在启动时，客户端会向配置服务器发送请求，根据应用程序名称、环境（profile）和分支（label）来获取对应的配置信息。
    *   客户端会将获取到的配置加载到 Spring Environment 中，供应用程序使用。
*   **配置刷新：**
    *   **手动刷新：** 通过调用客户端的 `/actuator/refresh` 端点（POST请求）来手动触发配置刷新。这通常需要结合 Spring Cloud Bus（如 Kafka 或 RabbitMQ）来通知所有相关的客户端进行刷新。
    *   **动态刷新：** 当 Git 仓库中的配置发生变化时，可以通过 Webhook 通知 Config Server，然后 Config Server 结合 Spring Cloud Bus 通知所有订阅的客户端刷新配置。

### 2. Nacos

**运行原理：**

*   **服务端 (Nacos Server)：**
    *   提供统一的配置管理界面和 API 接口。
    *   负责存储、管理和发布配置。配置可以按 Group 和 Data ID 进行分组和标识。
    *   支持配置的版本管理、回滚、灰度发布等高级功能。
    *   同时还集成了服务发现与注册的功能。
*   **客户端 (Nacos Client)：**
    *   通过 `spring-cloud-starter-alibaba-nacos-config` 依赖集成到 Spring Cloud 应用中。
    *   在启动时，客户端会向 Nacos Server 发送请求获取配置。
    *   客户端与 Nacos Server 之间建立长连接（如基于 TCP 或 HTTP 长轮询），当 Nacos Server 中的配置发生变化时，会主动将变更推送到订阅了该配置的客户端，实现配置的实时动态刷新，无需重启应用。

### 3. Apollo (阿波罗)

**运行原理：**

*   **服务端：** Apollo 是一个由多个模块组成的分布式系统，主要包括：
    *   **Config Service：** 提供配置的获取接口。
    *   **Admin Service：** 提供配置管理接口和配置发布接口。
    *   **Portal：** 配置管理界面，供用户进行配置的增删改查、发布等操作。
    *   **Config DB / Meta DB：** 存储配置信息、审计信息、应用信息等。
*   **客户端：**
    *   **Client Agent (SDK)：** 集成在应用程序中。
    *   启动时，客户端从 Config Service 获取应用程序配置。
    *   客户端与 Config Service 之间维护长连接（HTTP 长轮询），以监听配置变更通知。
    *   一旦 Config Service 通知配置有更新，客户端会从 Config Service 拉取最新配置，并更新本地缓存。
    *   Apollo 客户端还支持本地文件缓存，即使 Config Service 不可用，也能使用上次成功获取的配置。
*   **发布与通知：**
    *   管理员在 Portal 修改并发布配置。
    *   Admin Service 将配置更新信息写入数据库，并通知 Config Service。
    *   Config Service 通过长轮询机制将配置变更通知推送到客户端，客户端拉取最新配置。

**共同特点：**

*   **中心化管理：** 将所有微服务的配置集中存储和管理。
*   **配置分离：** 将配置从代码中分离，提高应用程序的灵活性和可维护性。
*   **动态刷新：** 大多数配置中心都支持在不重启应用的情况下动态更新配置。
*   **版本管理与回滚：** 支持对配置进行版本管理和历史回滚，保证配置的可靠性。
*   **多环境支持：** 可以根据不同的环境（开发、测试、生产）提供不同的配置。