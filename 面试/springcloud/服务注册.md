服务注册发现有以下常用框架技术：

1.  **Eureka (Netflix Eureka):**
    *   **原理：** Eureka 采用 AP 原则（可用性优先），即使注册中心集群出现一部分节点故障，服务仍然可以注册和发现。
        *   **服务注册：** 服务实例启动时，会向 Eureka Server 发送注册请求，将自己的 IP、端口、服务名等信息注册到 Eureka Server。
        *   **服务续约：** 服务实例会定期（默认 30 秒）向 Eureka Server 发送心跳来续约，表明自己还存活。
        *   **服务发现：** 消费者（客户端）启动时，会从 Eureka Server 获取注册表信息并缓存到本地，然后通过服务名找到对应的服务实例列表。当需要调用服务时，从本地缓存中选择一个服务实例进行调用。
        *   **服务下线：** 服务正常关闭时会向 Eureka Server 发送下线请求；如果服务异常宕机，Eureka Server 在一段时间没有收到心跳后，会将该服务从注册表中移除。

2.  **Nacos (Alibaba Nacos):**
    *   **原理：** Nacos 是一个更全面的服务管理平台，支持服务注册发现、配置管理和动态 DNS 服务。它支持 AP 和 CP 两种模式。
        *   **服务注册：** 服务实例启动时向 Nacos Server 注册，可以注册为临时实例或持久实例。
        *   **服务续约：** 临时实例会发送心跳续约。
        *   **服务发现：** 客户端订阅服务，Nacos Server 会推送服务列表变更，客户端也会定期拉取服务列表。
        *   **服务健康检查：** Nacos 提供多种健康检查机制（如 TCP/HTTP/MySQL 等），更精细地管理服务实例状态。

3.  **Consul (HashiCorp Consul):
    *   **原理：** Consul 采用 CP 原则（一致性优先），使用 Raft 协议保证注册中心数据的一致性。
        *   **服务注册：** 服务实例通过 HTTP API 或 DNS 接口向 Consul Agent 注册。Consul Agent 会将注册信息转发给 Consul Server。
        *   **健康检查：** Consul 提供多种健康检查方式（心跳、HTTP、TCP 等），确保只有健康的实例才会被发现。
        *   **服务发现：** 客户端通过 HTTP API 或 DNS 接口查询 Consul 获取服务实例列表。

4.  **ZooKeeper (Apache ZooKeeper):**
    *   **原理：** ZooKeeper 是一个分布式协调服务，也可以用于服务注册发现，但通常需要自己实现一些逻辑。它也遵循 CP 原则。
        *   **服务注册：** 服务实例启动时，在 ZooKeeper 中创建一个临时节点，节点路径可以包含服务名和实例信息（IP、端口）。
        *   **服务续约：** 只要服务实例与 ZooKeeper 的会话保持活跃，临时节点就会存在。
        *   **服务发现：** 消费者通过监听 ZooKeeper 中特定服务节点（父节点）的子节点变化来获取服务实例列表。当有服务上线或下线时，消费者会收到通知。

**服务注册发现的通用原理：**

服务注册发现机制旨在解决微服务架构中服务实例动态变化（上线、下线、扩缩容）导致的服务地址管理复杂性问题。其核心思想是：

1.  **服务注册（Service Registration）：**
    *   服务提供者（Service Provider）在启动时，将自己的信息（如服务名、IP 地址、端口号、版本等）报告给一个中心化的服务注册中心（Service Registry）。
    *   通常会有一个心跳机制，服务提供者会定期向注册中心发送心跳，告知自己仍然存活。如果注册中心长时间未收到心跳，则认为服务提供者已失效，会将其从注册表中移除。

2.  **服务发现（Service Discovery）：**
    *   服务消费者（Service Consumer）在需要调用某个服务时，不会直接硬编码服务提供者的地址。
    *   它会向服务注册中心查询该服务的所有可用实例列表。
    *   服务注册中心返回一个或多个服务提供者的地址列表。
    *   服务消费者根据这些地址进行负载均衡，选择一个实例进行调用。

**两种主要的服务发现模式：**

*   **客户端侧服务发现 (Client-side Discovery)：** 消费者直接向注册中心查询服务列表，并在客户端自行选择一个实例进行调用（例如 Eureka 的默认模式）。
*   **服务端侧服务发现 (Server-side Discovery)：** 消费者请求一个负载均衡器或 API 网关，由负载均衡器/API 网关向注册中心查询服务列表，然后将请求转发到后端的一个服务实例（例如使用 Nginx/HAProxy + Consul）。